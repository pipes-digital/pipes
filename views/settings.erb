<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Settings | Pipes</title>
    <link href="<%= url 'style.css' %>" rel="stylesheet">
    <link rel="stylesheet" href="/node_modules/purecss/build/pure-min.css">
    <link rel="stylesheet" href="/node_modules/purecss/build/grids-responsive-min.css">
    <script src="/node_modules/vex-js/dist/js/vex.combined.min.js"></script>
    <script>vex.defaultOptions.className = 'vex-theme-wireframe'</script>
    <link rel="stylesheet" href="/node_modules/vex-js/dist/css/vex.css" />
    <link rel="stylesheet" href="/node_modules/vex-js/dist/css/vex-theme-wireframe.css" />
    <script src="<%= url '/settings.js' %>"></script>
       
    <meta name="viewport" content="width=device-width, initial-scale=1"
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
</head>
<body>
    <%= erb :nav, :locals => {:current => 'settings'} %>
    <main id="settings">
        <section class="pure-g">
            <div class="pure-u-1 pure-u-md-1-3"> </div>
            <div class="pure-u-1 pure-u-md-1-3">
                <div class="settings_notification notification_error" id="mailchange_fail">Error changing email. Is it already used?</div>
                <div class="settings_notification notification_success"id="mailchange">Email changed! Please logout to apply the change.</div>
                <h2>Change Email</h2>
                <aside>Make sure you really control the new email address. You will not be able to login otherwise.</aside>
                <form class="pure-form pure-form-stacked" method="POST" action="/mailchange">
                    <label for="newmail">New Email</label>
                    <input type="email" name="newmail" id="newmail" placeholder="<%= authorized_email %>"/>
                    <label for="newmail_confirmation">Please confirm the email address</label>
                    <input type="email" name="newmail_confirmation" id="newmail_confirmation" placeholder="name@mailprovider.com"/>
                    <button type="submit" class="pure-button pure-button-primary">OK</button>
                </form>

                <h2>Export</h2>
                <p>Get the raw data that form the pipes saved in your account.</p>
                <form class="pure-form pure-form-stacked" method="GET" action="/export">
                    <button type="submit" class="pure-button pure-button-primary">Export</button>
                </form>

                <section id="dangerSettings">
                    <h2>Delete Account</h2>
                    <p>Irreversibly delete this account and all its pipes.</p>
                    <form class="pure-form pure-form-stacked" method="GET" action="/deleteAccount">
                        <button type="submit" class="pure-button pure-button-primary deleteAccount">Delete account</button>
                    </form>
                </section>
            </div>
            
            <div class="pure-u-1 pure-u-md-1-3"> </div>
        </section>
    </main>
    
</body>
</html>